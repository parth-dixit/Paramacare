<!DOCTYPE html>
<html lang="zxx">

<head>
    <title>Parama Care</title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico" />
    <!-- bootstrap.min css -->
    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
    <!-- Icon Font Css -->
    <link rel="stylesheet" href="plugins/icofont/icofont.min.css">
    <!-- Slick Slider  CSS -->
    <link rel="stylesheet" href="plugins/slick-carousel/slick/slick.css">
    <link rel="stylesheet" href="plugins/slick-carousel/slick/slick-theme.css">
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body id="top">
    <header>
        <nav class="navbar navbar-expand-lg navigation" id="navbar" style="background: aliceblue">
          <div class="container" style="display: contents; margin: 0%">
            <a class="navbar-brand" href="index.html">
              <img src="images/camohealth.png" alt="" class="img-fluid" />
            </a>
  
            <button
              class="navbar-toggler collapsed"
              type="button"
              data-toggle="collapse"
              data-target="#navbarmain"
              aria-controls="navbarmain"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="icofont-navigation-menu"></span>
            </button>
  
            <div class="collapse navbar-collapse" id="navbarmain">
                <li class="nav-item"><a class="nav-link" href="EducationHub.html">Resources</a></li>
                
                <div class="btn-container">
                  <a
                    href="Login_Users.html"
                    class="btn btn-main-2 btn-icon btn-round-full"
                    style="margin-top: 2.5%"
                    >Schedule Appoinment
                  </a>
                </div>
              </ul>
            </div>
          </div>
        </nav>
    </header>
    <section>
        <div style="text-align-last: center;margin-left: 2%;">
        </div>
        <div style="display: flex;">
            <div class="col-md-4"></div>
        </div>
        <br>
        <br>
        <br>
        <div style="display: flex;">
            <div class="col-md-4"></div>
            <div class="col-md-4">
                <div class="appoinment-wrap mt-6 mt-lg-0">
                    <h2 class="mb-2 title-color">Password Reset</h2>
                    <form id="#" class="appoinment-form" method="post" action="#">
                        <div class="row" id="Email">
                            <div class="col-lg-6">
                                <div id="snackbar">Your password has been reset</div>
                                <div id="failure">Your password could not be updated, please try again later</div>
                                <div class="form-group">
                                    <b>Email address:<span style="color: red;">*</span></b>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <input name="email" id="email" type="text" class="form-control">
                                    <label id="lblEmail"><span style="color: red;"><i>Please Enter Email
                                        ID</i></span></label>
                                    
                                </div>
                            </div>
                            <div class="col-lg-6">
                            </div>
                            <div class="col-lg-6">
                                <a href="#" id="SendCode">Send Verification Code</a>
                            </div>
                            <div class="col-lg-4"></div>
                            <div style="padding-top: 5%;" class="col-lg-6"><a class="btn btn-round-full"
                                    onclick="Cancel()" style="color: white; background: grey;">Cancel</a></div>
                        </div>
                        <div class="row" id="ResetPassword">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <b>Verification Code:<span style="color: red;">*</span></b>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <input name="password" id="txtVC" type="text" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <b>New Password:<span style="color: red;">*</span></b>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <input name="password" id="password" type="password" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <b>Confirm Password:<span style="color: red;">*</span></b>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <input name="ConfirmPassword" id="ConfirmPassword" type="password" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-6"></div>
                            <div class="col-lg-6">
                                <a href="#" id="SendCode">Re-Send Verification Code</a>
                            </div>
                            <div style="padding-top: 5%;" class="col-lg-6"><a class="btn btn-main btn-round-full"
                                    onclick="Save()" style="color: white;">Submit</a></div>
                            <div style="padding-top: 5%;" class="col-lg-6"><a class="btn btn-round-full"
                                    onclick="Cancel()" style="color: white; background: grey;">Cancel</a></div>
                        </div>
                </div>
            </div>

            <!--
    Essential Scripts
    =====================================-->
            <!-- Main jQuery -->
            <script src="plugins/jquery/jquery.js"></script>
            <!-- Bootstrap 4.3.2 -->
            <script src="plugins/bootstrap/js/popper.js"></script>
            <script src="plugins/bootstrap/js/bootstrap.min.js"></script>
            <script src="plugins/counterup/jquery.easing.js"></script>
            <!-- Slick Slider -->
            <script src="plugins/slick-carousel/slick/slick.min.js"></script>
            <!-- Counterup -->
            <script src="plugins/counterup/jquery.waypoints.min.js"></script>
            <script src="plugins/shuffle/shuffle.min.js"></script>
            <script src="plugins/counterup/jquery.counterup.min.js"></script>
            <!-- Google Map -->
            <script src="js/script.js"></script>
            <script src="js/contact.js"></script>
</body>

</html>



<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
      

        $('#ResetPassword').hide();
        $('#lblEmail').hide();
    });

    $("#SendCode").click(function () {
        if($('#email').val() == ''){
            alert("Please Enter valid Email address");
            return false;
        }
        else{
            $.ajax({
                url: 'http://3.229.127.143:8095/users/sendOTP/' + $('#email').val(),
                type: 'GET',
        headers: {
                      'Content-Type': "application/json",
                      
                    }, 
        dataType: 'text',
                success: function (res) {
                     Swal.fire({
    title: "<i>Success</i>", 
	html: res,  
    confirmButtonText: "Okay</u>", 
			});
                    $('#ResetPassword').show();
                    $('#Email').hide();
                },
                error: function (error) {
                    Swal.fire({
    title: "<i>Error</i>", 
	html: error.responseText,  
    confirmButtonText: "Okay</u>", 
			});
                }
            });
            
        }
        
    });

    function Cancel() {
        window.location.href = "Login_Practitioners.html";
    }

    function Save() {
        if ($('#password').val() == '' ||  $('#ConfirmPassword').val() == '') {
            alert("Please enter all required fields");
            return false;
        }
        if ($('#password').val() != $('#ConfirmPassword').val()) {
            alert("New password and Confirm Password do not match!");
            return false;
        }
        else {
            $.ajax({
                url: 'http://3.229.127.143:8095/beforeLogin/passwordReset',
                type: "PUT",
                data: JSON.stringify({
                    otp: $('#txtVC').val(),
                    newPassword: $('#ConfirmPassword').val(),
                    emailId: $('#email').val()
                    
                }),
                dataType: "text",
                contentType: "application/json;charset=utf-8",
                success: function (data) {
                    var x = document.getElementById("snackbar");
    x.className = "show";
    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
    setTimeout(() => { window.location.href = "Login_Practitioners.html" ; }, 1000);
                },
                error: function (error) {

    alert(error.responseText);
                }
            });
        }

    }
</script>

<footer class="footer section gray-bg" style="padding: 2%;">
    <div class="row">
        <label><b>© Camo Platforms Inc. All rights reserved</b></label>
    </div>
</footer>