<!DOCTYPE html>
<html lang="zxx">

<head>
    <title>Parama Care</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="/images/favicon.ico" />

    <!-- bootstrap.min css -->
    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
    <!-- Icon Font Css -->
    <link rel="stylesheet" href="plugins/icofont/icofont.min.css">
    <!-- Slick Slider  CSS -->
    <link rel="stylesheet" href="plugins/slick-carousel/slick/slick.css">
    <link rel="stylesheet" href="plugins/slick-carousel/slick/slick-theme.css">

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="css/style.css">

</head>

<body id="top">

    <header>
        <nav class="navbar navbar-expand-lg navigation" id="navbar" style="background: aliceblue;">
            <div class="container" style="display: contents;margin: 0%;">
                <a class="navbar-brand" href="Practitioner_Upcoming_Appointments.html">
                    <img src="images/camohealth.png" alt="" class="img-fluid">
                </a>

                <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarmain"
                    aria-controls="navbarmain" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="icofont-navigation-menu"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarmain">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item"><a class="nav-link" style="color:blue;">Profile</a></li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" id="dropdown02" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">Appointments <i
                                    class="icofont-thin-down"></i></a>
                            <ul class="dropdown-menu" aria-labelledby="dropdown02">
                                <li><a class="dropdown-item" href="Practitioner_Upcoming_Appointments.html">Upcoming
                                        Appointments</a></li>
                                <li><a class="dropdown-item" href="Practitioner_Past_Appointment.html">Appointment
                                        History</a></li>
                            </ul>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="Practitioner_Availability.html">Availability</a></li>
                        <li class="nav-item"><a class="nav-link" href="EducationHub_Practitioner.html">Resources</a></li>

                        <li class="nav-item"><a class="nav-link" onclick="logout()" href="Login_Practitioners.html">Logout</a></li>
                        <li class="nav-item"><a class="nav-link" >Welcome Dr. <span id="userName"></span></a></li>

                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <section class="section appoinment" style="padding-top: 0.5%;margin: 2%;">
        <div style="text-align-last: center;margin-left: 2%;">
            <h3>Edit Profile</h3>
            <hr>
        </div>
        <div class="row">
            <div class="col-sm">
                <b>First Name:</b>
            </div>
            <div class="col-sm">
                <b>Last Name:</b>
            </div>
            <div class="col-sm">
                <b>Date of Birth:</b>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <input name="fname" id="fname" type="text" class="form-control">
                <label id="lblFname"><span style="color: red;"><i>Please Enter your First name</i></span></label>
            </div>
            <div class="col-sm">
                <input name="lname" id="lname" type="text" class="form-control">
                <label id="lblLname"><span style="color: red;"><i>Please Enter
                    your last name</i></span></label>
            </div>
            <div class="col-sm">
                <input name="dob" id="dob" type="date" class="form-control">
                <label id="lblDOB"><span style="color: red;"><i>Please Enter
                   Date of Birth</i></span></label>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <b>Address (Line 1):</b>
            </div>
            <div class="col-sm">
                <b>Address (Line 2):</b>
            </div>
            <div class="col-sm">
                <b>City:</b>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <input name="add1" id="add1" type="text" class="form-control">
                <label id="lblAdd1"><span style="color: red;"><i>Please Enter
                    Valid Address</i></span></label>
            </div>
            <div class="col-sm">
                <input name="add2" id="add2" type="text" class="form-control" placeholder="Optional">
            </div>
            <div class="col-sm">
                <input name="city" id="city" type="text" class="form-control">
                <label id="lblCity"><span style="color: red;"><i>Please Enter
                    your city</i></span></label>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <b>State:</b>
            </div>
            <div class="col-sm">
                <b>Zipcode:</b>
            </div>
            <div class="col-sm">
                <b>Email:</b>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <select  class="form-control" id="state">
                    <option></option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District Of Columbia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
                <label id="lblState"><span style="color: red;"><i>Please Enter
                    your state</i></span></label>
            </div>
            <div class="col-sm">
                <input name="zip" id="zip" type="text" class="form-control">
                <label id="lblZip"><span style="color: red;"><i>Please enter your zip code</i></span></label>
            </div>
            <div class="col-sm">
                <input name="email" id="email" type="text" class="form-control" disabled>
                <label id="lblEmail"><span style="color: red;"><i>Please Enter
                    Valid Email</i></span></label>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <b>Phone:</b>
            </div>
            <div class="col-sm">
                <b>Certificate:</b>
            </div>
            <div class="col-sm">
                <b>License:</b>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <input name="contact" id="contact" type="text" class="form-control"
                    pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}">
            </div>
            <div class="col-sm">
                <input type="button" class="btn btn-main btn-round-full" id="btnFileUpload" value="Attach" />
                <span id="spnFilePath"></span>
                <input type="file" id="FileUpload" style="display: none" />
                <span id="fileuploaded"></span>
            </div>
            <div class="col-sm">
                <input type="button" class="btn btn-main btn-round-full" id="btnFileUpload1" value="Attach" />
                <span id="spnFilePath1"></span>
                <input type="file" id="FileUpload1" style="display: none" />
                <span id="fileuploaded1"></span>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <b>Specialization:</b>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <div id="snackbar">Your profile has been updated</div>
    <div id="failure">Your profile could not be updated, please try again later</div>
                <select class="form-control" id="Specialization" multiple="multiple">

                    <option value="1">Sleep Training</option>
                    <option value="2">Lactation Consultation</option>
                    <option value="3">Doula Match</option>
                    <option value="4">Midwife Therapy</option>
                    <option value="5">Pelivic Floor Therapy</option>
                    <option value="6">Postpartum Depression Therapy</option>
                </select>
                <label id="lblSpecialization"><span style="color: red;"><i>Please Select Specialization</i></span></label>
            </div>
        </div>
        <div style="margin: 2%;text-align-last: center;">
		<input type="button" class="btn btn-main btn-round-full" id="save" onclick="register()" value="Save">
        </div>
    </section>



    <!-- 
    Essential Scripts
    =====================================-->


    <!-- Main jQuery -->
    <script src="plugins/jquery/jquery.js"></script>
    <!-- Bootstrap 4.3.2 -->
    <script src="plugins/bootstrap/js/popper.js"></script>
    <script src="plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="plugins/counterup/jquery.easing.js"></script>
    <!-- Slick Slider -->
    <script src="plugins/slick-carousel/slick/slick.min.js"></script>
    <!-- Counterup -->
    <script src="plugins/counterup/jquery.waypoints.min.js"></script>

    <script src="plugins/shuffle/shuffle.min.js"></script>
    <script src="plugins/counterup/jquery.counterup.min.js"></script>
    <!-- Google Map -->
    
    <script src="js/script.js"></script>
    <script src="js/contact.js"></script>

</body>

</html>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>

<script type="text/javascript">
    $(function () {
        var fileupload = $("#FileUpload");
        var filePath = $("#spnFilePath");
        var button = $("#btnFileUpload");
        /var button1 = $("#btn1FileUpload");/
        button.click(function () {
            $('#fileuploaded').hide();
            fileupload.click();
        });
        fileupload.change(function () {
            var fileName = $(this).val().split('\\')[$(this).val().split('\\').length - 1];
            filePath.html("<b>Selected File: </b>" + fileName);
        });
    });
    $(function () {
        var fileupload1 = $("#FileUpload1");
        var filePath = $("#spnFilePath1");
        var button = $("#btnFileUpload1");
        /var button1 = $("#btn1FileUpload");/
        button.click(function () {
            $('#fileuploaded1').hide();
            fileupload1.click();
        });
        fileupload1.change(function () {
            var fileName = $(this).val().split('\\')[$(this).val().split('\\').length - 1];
            filePath.html("<b>Selected File: </b>" + fileName);
        });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
 
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.14/css/bootstrap-multiselect.css" type="text/css">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/1.1.1/js/bootstrap-multiselect.min.js"></script>
<script type="text/javascript">
 
    $(document).ready(function() {
        document.getElementById("userName").innerHTML = JSON.parse(localStorage.getItem('Jwt')).userName;
        addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            document.getElementById("save").click();
        }
        });
 
        $('#Specialization').multiselect();
        $('#lblEmail').hide();
		$('#lblFname').hide();
        $('#lblLname').hide();
		$('#lblContact').hide();
        $('#lblDOB').hide();
		$('#lblAdd1').hide();
        $('#lblCity').hide();
		$('#lblZip').hide();
        $('#lblGender').hide();
        $('#lblState').hide();
        $('#lblFile1').hide();
        $('#lblFile2').hide();
        $('#lblSpecialization').hide();
        GetData();
 
    });
</script>


<script>

function GetData(){
        var UserId = "115";
        $.ajax({
                url: 'http://3.229.127.143:8095/users/getPractitionerProfile',
                type: "GET",
                headers: {
                      'Authorization': `Bearer ${JSON.parse(localStorage.getItem('Jwt')).jwt}`
                    }, 
                success: function (data) {
                    console.log(data);
                    $.ajax({
                        url: 'http://3.229.127.143:8095/users/getPracSpeciality',
                        type: "GET",
                headers: {
                      'Authorization': `Bearer ${JSON.parse(localStorage.getItem('Jwt')).jwt}`
                    }, 
                    success:function(data){
                        data.forEach(element => {
                            $("select").find("option[value="+element+"]").prop("selected", "selected");
                        });
                        
                    }
                    })
                    $('#fname').val(data.firstName) ;
                    $('#lname').val(data.lastName) ;
                    $('#add1').val(data.address1);
                    $('#add2').val(data.address2);
                    $('#city').val(data.city);
                    $('#state').val(data.state);
                    $('#zip').val(data.zipcode);
                    $('#contact').val(data.phoneNumber);
                    $('#dob').val(data.dateOfBirth);
                    $('#email').val(data.email);
                    $('#fileuploaded').html("<a href="+data.certificate +" target='_blank'>" + data.certificateFileName + "</a>");
                    $('#fileuploaded1').html("<a href="+data.license +" target='_blank'>" + data.licenseFileName + "</a>");
                },
                error: function (error) {
                    alert(error.responseText);
                }
            });
        }

function register(){

    var count = 0;
    if ($('#email').val() == '') {
        $('#lblEmail').show();
        count++;
    }
    else{
        $('#lblEmail').hide();
    }

    if($('#fname').val() == ''){
        $('#lblFname').show();
        count++;
    }
    else{
        $('#lblFname').hide();
    }
    if($('#lname').val() == ''){
        $('#lblLname').show();
        count++;
    }
    else{
        $('#lblLname').hide();
    }
    if($('#dob').val() == ''){
        $('#lblDOB').show();
        count++;
    }
    else{
        $('#lblDOB').hide();
    }

    if($('#add1').val() == ''){
        $('#lblAdd1').show();
        count++;
    }
    else{
        $('#lblAdd1').hide();
    }
    
    if($('#contact').val() == ''){
        $('#lblContact').show();
        count++;
    }
    else{
        $('#lblContact').hide();
    }
    
    if($('#zip').val() == ''){
        $('#lblZip').show();
        count++;
    }
    else{
        $('#lblZip').hide();
    }
    
    if($('#city').val() == ''){
        $('#lblCity').show();
        count++;
    }
    else{
        $('#lblCity').hide();
    }

    if($('#genderSelect').val() == ''){
        $('#lblGender').show();
        count++;
    }
    else{
        $('lblGender').hide();
    }
    if($('#state').val() == ''){
        $('#lblState').show();
        count++;
    }
    else{
        $('lblState').hide();
    }


    if (IsEmail($('#email').val()) == false) {
        $('#lblEmail').show();
        count++;
    }

    if(count > 0){
        return false;
    }

    function IsEmail(email) {
    var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if(!regex.test(email)) {
        return false;
    }else
    {
        return true;
    }}

   
    console.log($('#dob').val());
    var jsondata= JSON.stringify({  firstName:$('#fname').val(),
        lastName:$('#lname').val(),
        address1:$('#add1').val(),
        address2:$('#add2').val(),
        city:$('#city').val(),
        state:$('#state').val(),
        zipcode:$('#zip').val(),
        phoneNumber:$('#contact').val(),
        userType:'Practitioner',
        gender:$('#genderSelect').val(),
        dateOfBirth:$('#dob').val(),
        specialityId:$('#Specialization').val(),
        email:$('#email').val(),
        insuranceNum:$('#inum').val(),
        insurancePlan:null,});

        var data = new FormData();
        data.append('jsondata',jsondata);
        data.append('license',$('#FileUpload1')[0].files[0]);
        data.append('certificate',$('#FileUpload')[0].files[0]);
      
        data.append('insurancecard', null ),   
    
    
$.ajax({
  url: 'http://3.229.127.143:8095/users/editProfile/',
  type: "PUT",
  headers: {
                      'Authorization': `Bearer ${JSON.parse(localStorage.getItem('Jwt')).jwt}`
                    }, 
    data: data,
    cache:false,
    processData:false,
    contentType:false,
  success: function (data) {
    var x = document.getElementById("snackbar");
    x.className = "show";
    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
    setTimeout(() => { window.location.href = "Practitioner_Upcoming_Appointments.html" ; }, 1000);
  },
  error: function (error) {
    var x = document.getElementById("failure");
    x.className = "show";
    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
  }
});
}  
function logout(){
         localStorage.removeItem('Jwt'); 
	    } 
</script>

<footer class="footer section gray-bg" style="padding: 2%;">
    <div class="row">
        <label><b>© Camo Platforms Inc. All rights reserved</b></label>
    </div>
</footer>